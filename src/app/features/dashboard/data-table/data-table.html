<div class="w-full bg-gray-50">
  <div class="rounded-lg bg-white shadow-sm">
    <!-- Header -->
    <div class="flex items-center justify-between border-b p-6">
      <h2 class="text-xl font-semibold text-gray-900">Team members</h2>

      <div class="flex justify-center gap-2.5">
        <button
          hlmBtn
          variant="outline"
          class="text-[14px] leading-5 font-medium py-[10px] px-4 !bg-white border-[1px] border-solid border-[#D0D5DD] h-[40px] w-[102px]"
          size="sm"
          (click)="addMember()"
        >
          + Add
        </button>
        <button
          hlmBtn
          variant="outline"
          class="text-[14px] leading-5 font-medium py-[10px] px-4 !bg-white border-[1px] border-solid border-[#D0D5DD] h-[40px] w-[102px]"
          size="sm"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
          >
            <path
              d="M8.33333 15H11.6667V13.3333H8.33333V15ZM2.5 5V6.66667H17.5V5H2.5ZM5 10.8333H15V9.16667H5V10.8333Z"
              fill="#525866"
            />
          </svg>
          Filters
        </button>
      </div>
    </div>

    <!-- Table -->
    <div class="block w-full overflow-auto">
      @defer {
      <table hlmTable class="w-full">
        <thead hlmTHead>
          @for (headerGroup of _table.getHeaderGroups(); track headerGroup.id) {
          <tr hlmTr>
            @for (header of headerGroup.headers; track header.id) {
            <th class="py-4 px-6" hlmTh>
              @if (!header.isPlaceholder) {
              <ng-container
                *flexRender="
                  header.column.columnDef.header;
                  props: header.getContext();
                  let headerText
                "
              >
                <div [innerHTML]="headerText"></div>
              </ng-container>
              }
            </th>
            }
          </tr>
          }
        </thead>
        <tbody hlmTBody class="w-full">
          @for (row of _table.getRowModel().rows; track row.id) {
          <tr class="hover:bg-[#F9FAFB]" hlmTr>
            @for (cell of row.getVisibleCells(); track $index) {
            <td hlmTd class="py-4 px-6">
              <!-- <ng-container
                *flexRender="cell.column.columnDef.cell; props: cell.getContext(); let cellContent"
              >
                <div [innerHTML]="cellContent"></div>
              </ng-container> -->

              <ng-container
                *flexRender="cell.column.columnDef.cell; props: cell.getContext(); let cellContent"
              >
                <!-- Special handling for actions column -->
                <ng-container *ngIf="cell.column.id === 'actions'; else normalCell">
                  <div class="flex items-center justify-end gap-1">
                    <button
                      class="inline-flex h-8 w-8 items-center justify-center rounded hover:bg-gray-100"
                      (click)="deleteMember(cellContent)"
                    >
                      <img src="/icons/delete.svg" alt="delete" />
                    </button>
                    <button
                      class="inline-flex h-8 w-8 items-center justify-center rounded hover:bg-gray-100"
                    >
                      <img src="/icons/edit.svg" alt="delete" />
                    </button>
                  </div>
                </ng-container>
                <ng-template #normalCell>
                  <div [innerHTML]="cellContent"></div>
                </ng-template>
              </ng-container>
            </td>
            }
          </tr>
          } @empty {
          <tr hlmTr>
            <td hlmTd class="h-24 text-center" [attr.colspan]="_columns.length">No results.</td>
          </tr>
          }
        </tbody>
      </table>
      }
    </div>

    <!-- Pagination -->
  </div>
</div>

<div class="flex items-center justify-between border-t py-4">
  <button
    hlmBtn
    variant="outline"
    size="sm"
    [disabled]="!_table.getCanPreviousPage()"
    (click)="_table.previousPage()"
  >
    <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
    </svg>
    Previous
  </button>

  <div class="flex items-center gap-1">
    @for (page of getPageNumbers(); track page) { @if (page === '...') {
    <span class="px-3 py-2 text-sm text-gray-500">...</span>
    } @else {
    <button
      hlmBtn
      [variant]="isActivePage(page) ? 'default' : 'ghost'"
      size="sm"
      class="min-w-[2.5rem]"
      (click)="goToPage(page)"
    >
      {{ page }}
    </button>
    } }
  </div>

  <button
    hlmBtn
    variant="outline"
    size="sm"
    [disabled]="!_table.getCanNextPage()"
    (click)="_table.nextPage()"
  >
    Next
    <svg class="ml-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
    </svg>
  </button>
</div>

<app-add-member></app-add-member>
